<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>×¤×¨×¡×™ ×”××§×“××™×” - ×”×—×‘×¨'×” ×”×˜×•×‘×™×</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.3.1/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.3.1/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.25.6/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com/3.4.10"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;800;900&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      background: #000000;
    }
    .oscar-title {
      font-family: 'Playfair Display', serif;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    @keyframes bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-15px); }
    }
  </style>
</head>
<body>
  <div id="root">
    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; color: #D4AF37; font-size: 1.5rem;">
      ×˜×•×¢×Ÿ...
    </div>
  </div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const supabase = window.supabase.createClient(
      'https://hzixitruvlsagrzqjrbw.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh6aXhpdHJ1dmxzYWdyenFqcmJ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExMzY4ODYsImV4cCI6MjA3NjcxMjg4Nn0.rwOdyWdWTuY55hs-ctOnD43Kz9drXusbDlfyMTyzrHI'
    );

    function extractYouTubeId(url) {
      const match = url.match(/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/watch\?.+&v=))([\w-]{11})/);
      return match ? match[1] : null;
    }

    const ALL_ALLOWED_PHONES = [
      '0528199115',
      '0587830179',
      '0535235297',
      '0542072856',
      '0504076333',
      '0546603631',
      '0539222662',
      '0525594170',
      '0525868712',
      '0544785336',
      '0544375174',
      '0527488174',
      '0526615726',
      '0524719411',
      '0549863202',
      '0526919168',
      '0549988476',
      '0545488845',
      '0543179530',
      '0528977852',
      '0545218003',
      '0505550674'
    ];

    const LUCKY_PHONE = ALL_ALLOWED_PHONES[Math.floor(Math.random() * ALL_ALLOWED_PHONES.length)];

    function AcademyAwards() {
      const [categories, setCategories] = useState([]);
      const [nominees, setNominees] = useState({});
      const [selectedCategory, setSelectedCategory] = useState(null);
      const [email, setEmail] = useState('');
      const [phone, setPhone] = useState('');
      const [isAuthenticated, setIsAuthenticated] = useState(false);
      const [selectedNominee, setSelectedNominee] = useState(null);
      const [adminCode, setAdminCode] = useState('');
      const [showAdmin, setShowAdmin] = useState(false);
      const [voteCounts, setVoteCounts] = useState({});
      const [loading, setLoading] = useState(true);
      const [voting, setVoting] = useState(false);
      const [message, setMessage] = useState(null);
      const [nominationCounts, setNominationCounts] = useState({});
      const [totalNominations, setTotalNominations] = useState({});
      const [votedCategories, setVotedCategories] = useState([]);
      const [showSuccessPopup, setShowSuccessPopup] = useState(false);
      const [totalVoters, setTotalVoters] = useState(0);
      const [showPrizePopup, setShowPrizePopup] = useState(false);

      useEffect(() => {
        loadCategories();
      }, []);

      const loadCategories = async () => {
        try {
          const { data: categoriesData } = await supabase
            .from('award_categories')
            .select('*')
            .order('display_order');

          const { data: nomineesData } = await supabase
            .from('award_nominees')
            .select('*')
            .order('display_order');

          setCategories(categoriesData || []);

          const nomineesByCategory = {};
          const counts = {};
          const totalCounts = {};

          (nomineesData || []).forEach(nominee => {
            if (!nomineesByCategory[nominee.category_id]) {
              nomineesByCategory[nominee.category_id] = [];
            }
            nomineesByCategory[nominee.category_id].push(nominee);

            counts[nominee.name] = (counts[nominee.name] || 0) + 1;

            const name = nominee.name.split(' - ')[0].trim();
            totalCounts[name] = (totalCounts[name] || 0) + 1;
          });

          setNominees(nomineesByCategory);
          setNominationCounts(counts);
          setTotalNominations(totalCounts);
          setLoading(false);
        } catch (error) {
          console.error('Error loading categories:', error);
          setLoading(false);
        }
      };

      const checkAdminCode = async () => {
        if (adminCode === '316439249') {
          setShowAdmin(true);
          setIsAuthenticated(true);
          await loadVoteCounts();
          setMessage({ type: 'success', text: 'âœ“ ××¦×‘ ×× ×”×œ ××•×¤×¢×œ - ×’×™×©×” ×—×•×¤×©×™×ª ×œ×›×œ ×”×§×˜×’×•×¨×™×•×ª' });
          setTimeout(() => setMessage(null), 2000);
        } else {
          setMessage({ type: 'error', text: '×§×•×“ ×©×’×•×™' });
          setTimeout(() => setMessage(null), 3000);
        }
      };

      const loadVoteCounts = async () => {
        try {
          const { data, error } = await supabase.rpc('get_vote_counts');
          if (error) throw error;

          const counts = {};
          (data || []).forEach(vote => {
            if (!counts[vote.category_id]) {
              counts[vote.category_id] = {};
            }
            counts[vote.category_id][vote.nominee_id] = vote.vote_count;
          });
          setVoteCounts(counts);
        } catch (error) {
          console.error('Error loading vote counts:', error);
        }
      };

      const handleAuthentication = async () => {
        if (!email || !phone) {
          setMessage({ type: 'error', text: '× × ×œ××œ× ××™×™×œ ×•××¡×¤×¨ ×˜×œ×¤×•×Ÿ' });
          setTimeout(() => setMessage(null), 3000);
          return;
        }

        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          setMessage({ type: 'error', text: '×›×ª×•×‘×ª ××™×™×œ ×œ× ×ª×§×™× ×”' });
          setTimeout(() => setMessage(null), 3000);
          return;
        }

        const testPhone = '0545218003';

        const normalizedPhone = phone.replace(/\D/g, '');
        if (!ALL_ALLOWED_PHONES.includes(normalizedPhone)) {
          setMessage({ type: 'error', text: '××¡×¤×¨ ×”×˜×œ×¤×•×Ÿ ××™× ×• ×¨×©××™ ×œ×”×¦×‘×™×¢' });
          setTimeout(() => setMessage(null), 3000);
          return;
        }

        setVoting(true);

        try {
          if (normalizedPhone !== testPhone) {
            const { data: existingVote, error: checkError } = await supabase
              .from('award_votes')
              .select('id')
              .eq('voter_phone', normalizedPhone)
              .maybeSingle();

            if (checkError && checkError.code !== 'PGRST116') {
              throw checkError;
            }

            if (existingVote) {
              setMessage({ type: 'error', text: '××¡×¤×¨ ×”×˜×œ×¤×•×Ÿ ×”×–×” ×›×‘×¨ ×”×¦×‘×™×¢' });
              setVoting(false);
              setTimeout(() => setMessage(null), 3000);
              return;
            }
          }

          setPhone(normalizedPhone);
          setIsAuthenticated(true);
          setMessage({ type: 'success', text: 'âœ“ ××•××ª ×‘×”×¦×œ×—×”! ×‘×—×¨ ×§×˜×’×•×¨×™×” ×œ×”×¦×‘×¢×”' });
          setTimeout(() => setMessage(null), 3000);
        } catch (error) {
          console.error('Error checking phone:', error);
          setMessage({ type: 'error', text: '×©×’×™××” ×‘××™××•×ª' });
          setTimeout(() => setMessage(null), 3000);
        } finally {
          setVoting(false);
        }
      };

      const handleVote = async () => {
        if (!selectedNominee) {
          setMessage({ type: 'error', text: '× × ×œ×‘×—×•×¨ ××•×¢××“' });
          setTimeout(() => setMessage(null), 3000);
          return;
        }

        setVoting(true);

        try {
          const { error } = await supabase
            .from('award_votes')
            .insert({
              category_id: selectedCategory.id,
              nominee_id: selectedNominee,
              voter_email: email,
              voter_phone: phone
            });

          if (error) throw error;

          const newVotedCategories = [...votedCategories, selectedCategory.id];
          setVotedCategories(newVotedCategories);

          setShowSuccessPopup(true);

          const allCategoriesVoted = newVotedCategories.length === categories.length;
          const isWinner = phone.replace(/\D/g, '') === LUCKY_PHONE && allCategoriesVoted;

          setTimeout(() => {
            setShowSuccessPopup(false);
            setSelectedNominee(null);

            if (isWinner) {
              setShowPrizePopup(true);
            } else {
              const currentIndex = categories.findIndex(c => c.id === selectedCategory.id);
              const nextCategory = categories[currentIndex + 1];

              if (nextCategory && !newVotedCategories.includes(nextCategory.id)) {
                setSelectedCategory(nextCategory);
              } else {
                setSelectedCategory(null);
              }
            }
          }, 2000);
        } catch (error) {
          console.error('Error voting:', error);
          setMessage({ type: 'error', text: '×©×’×™××” ×‘×©×œ×™×—×ª ×”×”×¦×‘×¢×”' });
          setTimeout(() => setMessage(null), 3000);
        } finally {
          setVoting(false);
        }
      };

      const loadTotalVoters = async () => {
        try {
          const { data, error } = await supabase
            .from('award_votes')
            .select('voter_phone', { count: 'exact', head: false });

          if (error) throw error;

          const uniquePhones = new Set(data.map(vote => vote.voter_phone));
          setTotalVoters(uniquePhones.size);
        } catch (error) {
          console.error('Error loading total voters:', error);
        }
      };

      useEffect(() => {
        if (showAdmin) {
          loadTotalVoters();
        }
      }, [showAdmin]);

      if (loading) {
        return (
          <div style={{minHeight: '100vh', background: '#000000', display: 'flex', alignItems: 'center', justifyContent: 'center'}}>
            <div style={{color: '#D4AF37', fontSize: '1.5rem', fontFamily: 'Playfair Display, serif'}}>×˜×•×¢×Ÿ...</div>
          </div>
        );
      }

      if (selectedCategory) {
        const videoId = extractYouTubeId(selectedCategory.video_url);
        const categoryNominees = nominees[selectedCategory.id] || [];
        const categoryVotes = voteCounts[selectedCategory.id] || {};

        return (
          <div style={{minHeight: '100vh', background: '#000000', color: 'white', padding: '1rem'}}>
            {showSuccessPopup && (
              <div style={{
                position: 'fixed',
                top: 0,
                left: 0,
                right: 0,
                bottom: 0,
                background: 'rgba(0, 0, 0, 0.9)',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                zIndex: 9999,
                animation: 'fadeIn 0.3s ease-in'
              }}>
                <div style={{
                  background: 'linear-gradient(180deg, #1a1a1a 0%, #0a0a0a 100%)',
                  borderRadius: '1rem',
                  padding: 'clamp(2rem, 5vw, 3rem)',
                  maxWidth: '90%',
                  width: '500px',
                  textAlign: 'center',
                  border: '2px solid #D4AF37',
                  boxShadow: '0 20px 80px rgba(212, 175, 55, 0.5)',
                  animation: 'scaleIn 0.4s ease-out'
                }}>
                  <div style={{
                    width: '80px',
                    height: '80px',
                    background: 'linear-gradient(135deg, #D4AF37 0%, #C5A028 100%)',
                    borderRadius: '50%',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    margin: '0 auto 1.5rem',
                    animation: 'bounce 0.6s ease-out'
                  }}>
                    <i className="fas fa-check" style={{fontSize: '2.5rem', color: '#000'}}></i>
                  </div>
                  <h2 className="oscar-title" style={{
                    fontSize: 'clamp(1.5rem, 4vw, 2rem)',
                    fontWeight: '800',
                    color: '#D4AF37',
                    marginBottom: '0.75rem'
                  }}>
                    ×”×¦×‘×¢×ª ×‘×”×¦×œ×—×”!
                  </h2>
                  <p style={{
                    fontSize: 'clamp(1rem, 2.5vw, 1.25rem)',
                    color: '#aaa',
                    marginBottom: '0'
                  }}>
                    ×¢×•×‘×¨×™× ×œ×§×˜×’×•×¨×™×” ×”×‘××”...
                  </p>
                </div>
              </div>
            )}

            {showPrizePopup && (
              <div style={{
                position: 'fixed',
                top: 0,
                left: 0,
                right: 0,
                bottom: 0,
                background: 'rgba(0, 0, 0, 0.95)',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                zIndex: 9999,
                animation: 'fadeIn 0.3s ease-in'
              }}>
                <div style={{
                  background: 'linear-gradient(180deg, #1a1a1a 0%, #0a0a0a 100%)',
                  borderRadius: '1.5rem',
                  padding: 'clamp(2rem, 5vw, 3rem)',
                  maxWidth: '90%',
                  width: '600px',
                  textAlign: 'center',
                  border: '3px solid #D4AF37',
                  boxShadow: '0 30px 120px rgba(212, 175, 55, 0.7)',
                  animation: 'scaleIn 0.5s ease-out'
                }}>
                  <div style={{
                    fontSize: 'clamp(3rem, 8vw, 5rem)',
                    marginBottom: '1rem',
                    animation: 'float 3s ease-in-out infinite'
                  }}>
                    ğŸ‰
                  </div>
                  <h2 style={{
                    fontFamily: 'Playfair Display, serif',
                    fontSize: 'clamp(1.75rem, 5vw, 3rem)',
                    fontWeight: '900',
                    color: '#D4AF37',
                    marginBottom: '1rem',
                    textTransform: 'uppercase',
                    letterSpacing: '0.05em'
                  }}>
                    ××–×œ ×˜×•×‘!
                  </h2>
                  <p style={{
                    fontSize: 'clamp(1.25rem, 3vw, 1.75rem)',
                    color: '#fff',
                    marginBottom: '1.5rem',
                    fontWeight: '600'
                  }}>
                    ×–×›×™×ª× ×‘×§×•×“ ×§×•×¤×•×Ÿ ×œ×•×•×œ×˜
                  </p>
                  <p style={{
                    fontSize: 'clamp(0.875rem, 2vw, 1rem)',
                    color: '#D4AF37',
                    marginBottom: '1.5rem',
                    fontWeight: '600'
                  }}>
                    ğŸ’¡ ××•××œ×¥ ×œ×¦×œ× ××¡×š!
                  </p>
                  <div style={{
                    background: '#fff',
                    borderRadius: '1rem',
                    padding: '1rem',
                    marginBottom: '1.5rem',
                    boxShadow: '0 10px 40px rgba(212, 175, 55, 0.3)'
                  }}>
                    <img
                      src="https://i.ibb.co/JjL0hXkq/Chat-GPT-Image-Oct-23-2025-11-21-11-AM.png"
                      alt="×§×•×“ ×§×•×¤×•×Ÿ ×•×•×œ×˜"
                      style={{
                        width: '100%',
                        maxWidth: '400px',
                        height: 'auto',
                        borderRadius: '0.5rem'
                      }}
                    />
                  </div>
                  <button
                    onClick={() => {
                      setShowPrizePopup(false);
                      setSelectedCategory(null);
                    }}
                    style={{
                      padding: 'clamp(0.875rem, 2vw, 1rem) clamp(2rem, 4vw, 3rem)',
                      background: 'linear-gradient(135deg, #D4AF37 0%, #C5A028 100%)',
                      color: '#000',
                      fontWeight: '700',
                      fontSize: 'clamp(1rem, 2.5vw, 1.25rem)',
                      borderRadius: '0.5rem',
                      border: 'none',
                      cursor: 'pointer',
                      boxShadow: '0 6px 20px rgba(212, 175, 55, 0.4)',
                      transition: 'all 0.2s',
                      letterSpacing: '0.02em'
                    }}
                  >
                    ×¡×’×•×¨
                  </button>
                </div>
              </div>
            )}

            <div style={{maxWidth: '1280px', margin: '0 auto'}}>
              <button
                onClick={() => setSelectedCategory(null)}
                style={{display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#D4AF37', background: 'none', border: 'none', cursor: 'pointer', fontSize: '0.95rem', marginBottom: '1.5rem', padding: '0.5rem'}}
              >
                <i className="fas fa-arrow-right"></i>
                <span>×—×–×¨×” ×œ×›×œ ×”×§×˜×’×•×¨×™×•×ª</span>
              </button>

              <div style={{background: 'linear-gradient(180deg, #1a1a1a 0%, #0a0a0a 100%)', borderRadius: '0.5rem', boxShadow: '0 20px 60px rgba(212, 175, 55, 0.15)', overflow: 'hidden', border: '1px solid rgba(212, 175, 55, 0.2)'}}>
                <div style={{background: 'linear-gradient(135deg, #D4AF37 0%, #C5A028 100%)', padding: '1.5rem', textAlign: 'center'}}>
                  <h2 className="oscar-title" style={{fontSize: 'clamp(1.5rem, 4vw, 2.5rem)', fontWeight: '800', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.75rem', margin: 0, color: '#000000', letterSpacing: '0.02em'}}>
                    <i className="fas fa-trophy" style={{fontSize: 'clamp(1.75rem, 4vw, 2.5rem)'}}></i>
                    {selectedCategory.name}
                  </h2>
                </div>

                {videoId && (
                  <div style={{aspectRatio: '16/9', width: '100%', background: '#000'}}>
                    <iframe
                      width="100%"
                      height="100%"
                      src={`https://www.youtube.com/embed/${videoId}?autoplay=1`}
                      title={selectedCategory.name}
                      frameBorder="0"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                      allowFullScreen
                      style={{width: '100%', height: '100%'}}
                    />
                  </div>
                )}

                <div style={{padding: 'clamp(1rem, 3vw, 2rem)'}}>
                  <h3 className="oscar-title" style={{fontSize: 'clamp(1.25rem, 3vw, 1.75rem)', fontWeight: '700', marginBottom: '1.5rem', textAlign: 'center', color: '#D4AF37', letterSpacing: '0.05em'}}>
                    ×”××•×¢××“×™×
                  </h3>

                  <div style={{marginBottom: '1.5rem', padding: '1rem', background: 'rgba(212, 175, 55, 0.05)', borderRadius: '0.5rem', border: '1px solid rgba(212, 175, 55, 0.15)'}}>
                    <h4 style={{fontSize: '0.9rem', fontWeight: '600', color: '#D4AF37', marginBottom: '0.75rem', textAlign: 'center'}}>
                      <i className="fas fa-star" style={{marginLeft: '0.5rem'}}></i>
                      ×¡×™×›×•× ××•×¢××“×•×™×•×ª
                    </h4>
                    <div style={{display: 'grid', gap: '0.5rem'}}>
                      {Object.entries(
                        categoryNominees.reduce((acc, nominee) => {
                          const name = nominee.name.split(' - ')[0].trim();
                          acc[name] = (acc[name] || 0) + 1;
                          return acc;
                        }, {})
                      ).sort((a, b) => b[1] - a[1]).map(([name, count]) => (
                        <div key={name} style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '0.5rem 1rem', background: 'rgba(0, 0, 0, 0.3)', borderRadius: '0.25rem', fontSize: '0.85rem'}}>
                          <span style={{color: '#e5e5e5'}}>{name}</span>
                          <span style={{color: '#D4AF37', fontWeight: '600'}}>
                            {count} {count === 1 ? '××•×¢××“×•×ª' : '××•×¢××“×•×™×•×ª'}
                          </span>
                        </div>
                      ))}
                    </div>
                  </div>

                  <div style={{display: 'grid', gap: '0.75rem', marginBottom: '1.5rem'}}>
                    {categoryNominees.map((nominee) => {
                      const voteCount = categoryVotes[nominee.id] || 0;
                      const totalVotes = Object.values(categoryVotes).reduce((a, b) => a + b, 0);
                      const percentage = totalVotes > 0 ? ((voteCount / totalVotes) * 100).toFixed(1) : 0;

                      return (
                        <button
                          key={nominee.id}
                          onClick={() => setSelectedNominee(nominee.id)}
                          style={{
                            padding: 'clamp(0.875rem, 2vw, 1.25rem)',
                            borderRadius: '0.5rem',
                            border: selectedNominee === nominee.id ? '2px solid #D4AF37' : '1px solid rgba(255, 255, 255, 0.1)',
                            background: selectedNominee === nominee.id
                              ? 'linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%)'
                              : 'rgba(255, 255, 255, 0.03)',
                            cursor: 'pointer',
                            transition: 'all 0.2s',
                            boxShadow: selectedNominee === nominee.id ? '0 0 20px rgba(212, 175, 55, 0.2)' : 'none'
                          }}
                        >
                          <div style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between', gap: '1rem'}}>
                            <div style={{display: 'flex', alignItems: 'center', gap: '0.75rem', flex: 1}}>
                              <div style={{
                                width: '1.25rem',
                                height: '1.25rem',
                                borderRadius: '50%',
                                border: '2px solid ' + (selectedNominee === nominee.id ? '#D4AF37' : 'rgba(255, 255, 255, 0.3)'),
                                background: selectedNominee === nominee.id ? '#D4AF37' : 'transparent',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                flexShrink: 0
                              }}>
                                {selectedNominee === nominee.id && (
                                  <div style={{width: '0.6rem', height: '0.6rem', background: '#000', borderRadius: '50%'}} />
                                )}
                              </div>
                              <span style={{fontSize: 'clamp(0.95rem, 2.5vw, 1.125rem)', fontWeight: '500', textAlign: 'right', color: selectedNominee === nominee.id ? '#ffffff' : '#e5e5e5'}}>
                                {nominee.name}
                              </span>
                            </div>
                            {showAdmin && (
                              <div style={{textAlign: 'left', flexShrink: 0}}>
                                <div style={{color: '#D4AF37', fontWeight: '700', fontSize: 'clamp(0.95rem, 2.5vw, 1.125rem)'}}>{voteCount}</div>
                                <div style={{color: '#888', fontSize: 'clamp(0.75rem, 2vw, 0.875rem)'}}>{percentage}%</div>
                              </div>
                            )}
                          </div>
                        </button>
                      );
                    })}
                  </div>

                  {message && (
                    <div style={{
                      padding: '0.875rem',
                      borderRadius: '0.5rem',
                      marginBottom: '1rem',
                      textAlign: 'center',
                      fontWeight: '600',
                      fontSize: 'clamp(0.875rem, 2vw, 1rem)',
                      background: message.type === 'success' ? 'rgba(34, 197, 94, 0.15)' : 'rgba(239, 68, 68, 0.15)',
                      color: message.type === 'success' ? '#22c55e' : '#ef4444',
                      border: '1px solid ' + (message.type === 'success' ? 'rgba(34, 197, 94, 0.3)' : 'rgba(239, 68, 68, 0.3)')
                    }}>
                      {message.text}
                    </div>
                  )}

                  {!showAdmin && (
                    <button
                      onClick={handleVote}
                      disabled={voting || !selectedNominee}
                      style={{
                        width: '100%',
                        padding: 'clamp(1rem, 2.5vw, 1.25rem)',
                        background: voting || !selectedNominee
                          ? 'rgba(212, 175, 55, 0.3)'
                          : 'linear-gradient(135deg, #D4AF37 0%, #C5A028 100%)',
                        color: '#000000',
                        fontWeight: '700',
                      fontSize: 'clamp(1rem, 2.5vw, 1.25rem)',
                      borderRadius: '0.5rem',
                      border: 'none',
                      cursor: voting || !selectedNominee ? 'not-allowed' : 'pointer',
                      boxShadow: voting || !selectedNominee ? 'none' : '0 6px 20px rgba(212, 175, 55, 0.4)',
                      transition: 'all 0.2s',
                      letterSpacing: '0.02em'
                    }}
                    >
                      {voting ? '×©×•×œ×—...' : '×”×¦×‘×¢ ×¢×›×©×™×•'}
                    </button>
                  )}

                  {showAdmin && (
                    <div style={{
                      padding: '1rem',
                      background: 'rgba(34, 197, 94, 0.1)',
                      border: '1px solid rgba(34, 197, 94, 0.3)',
                      borderRadius: '0.5rem',
                      textAlign: 'center',
                      color: '#22c55e',
                      fontWeight: '600',
                      fontSize: 'clamp(0.9rem, 2vw, 1rem)'
                    }}>
                      <i className="fas fa-eye" style={{marginLeft: '0.5rem'}}></i>
                      ××¦×‘ ×¦×¤×™×™×” ×‘×œ×‘×“ - ×× ×”×œ
                    </div>
                  )}
                </div>
              </div>
            </div>
          </div>
        );
      }

      return (
        <div style={{minHeight: '100vh', background: '#000000', color: 'white', padding: 'clamp(1rem, 3vw, 2rem)'}}>
          <div style={{maxWidth: '1536px', margin: '0 auto'}}>
            <button
              onClick={() => window.location.href = 'main.html'}
              style={{display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#D4AF37', background: 'none', border: 'none', cursor: 'pointer', fontSize: '0.95rem', marginBottom: '1.5rem', padding: '0.5rem'}}
            >
              <i className="fas fa-arrow-right"></i>
              <span>×—×–×¨×” ×œ×ª×¤×¨×™×˜ ×”×¨××©×™</span>
            </button>

            <div style={{textAlign: 'center', marginBottom: 'clamp(2rem, 5vw, 3rem)'}}>
              <img
                src="https://i.ibb.co/C3zyqv4F/Chat-GPT-Image-Oct-22-2025-04-33-19-PM.png"
                alt="×¤×¨×¡×™ ×”××§×“××™×”"
                style={{width: '100%', maxWidth: '1024px', margin: '0 auto 2rem', borderRadius: '0.5rem', boxShadow: '0 20px 60px rgba(212, 175, 55, 0.2)'}}
              />

              <h1 className="oscar-title" style={{fontSize: 'clamp(2.5rem, 8vw, 5rem)', fontWeight: '900', marginBottom: '0.5rem', color: '#D4AF37', letterSpacing: '0.02em', textShadow: '0 0 40px rgba(212, 175, 55, 0.3)'}}>
                ×¤×¨×¡×™ ×”××§×“××™×”
              </h1>
              <p style={{fontSize: 'clamp(1.125rem, 3vw, 1.5rem)', color: '#888', fontWeight: '300', letterSpacing: '0.1em'}}>
                ×”×—×‘×¨'×” ×”×˜×•×‘×™×
              </p>
            </div>

            {Object.keys(totalNominations).length > 0 && (() => {
              const movies = ['×‘×œ××§×™×£ 1', '×‘×œ××§×™×£ 2', '×‘×œ××§×™×£ 3', '×‘×œ××§×™×£ 4', '×‘×œ××§×™×£ 5'];
              const movieNominations = {};
              const actorNominations = {};

              Object.entries(totalNominations).forEach(([name, count]) => {
                if (movies.includes(name)) {
                  movieNominations[name] = count;
                } else {
                  actorNominations[name] = count;
                }
              });

              return (
                <div style={{marginBottom: 'clamp(2rem, 4vw, 3rem)'}}>
                  <h2 className="oscar-title" style={{fontSize: 'clamp(1.5rem, 4vw, 2rem)', fontWeight: '800', marginBottom: '1.5rem', textAlign: 'center', color: '#D4AF37'}}>
                    <i className="fas fa-star" style={{marginLeft: '0.75rem'}}></i>
                    ×¡×™×›×•× ××•×¢××“×•×™×•×ª
                  </h2>

                  <div style={{display: 'grid', gridTemplateColumns: window.innerWidth >= 768 ? '1fr 1fr' : '1fr', gap: 'clamp(1rem, 3vw, 2rem)', maxWidth: '1400px', margin: '0 auto'}}>
                    <div style={{background: 'rgba(212, 175, 55, 0.05)', borderRadius: '0.75rem', padding: 'clamp(1.5rem, 3vw, 2rem)', border: '1px solid rgba(212, 175, 55, 0.2)', boxShadow: '0 10px 40px rgba(0, 0, 0, 0.3)'}}>
                      <h3 className="oscar-title" style={{fontSize: 'clamp(1.25rem, 3vw, 1.5rem)', fontWeight: '700', marginBottom: '1.25rem', textAlign: 'center', color: '#D4AF37', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem'}}>
                        <i className="fas fa-film"></i>
                        ×¡×¨×˜×™×
                      </h3>
                      <div style={{display: 'flex', flexDirection: 'column', gap: 'clamp(0.75rem, 2vw, 1rem)'}}>
                        {Object.entries(movieNominations).sort((a, b) => b[1] - a[1]).map(([name, count]) => (
                          <div key={name} style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: 'clamp(0.75rem, 2vw, 1rem)', background: 'linear-gradient(135deg, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.2) 100%)', borderRadius: '0.5rem', border: '1px solid rgba(212, 175, 55, 0.2)'}}>
                            <span style={{color: '#ffffff', fontWeight: '500', fontSize: 'clamp(0.9rem, 2vw, 1rem)'}}>{name}</span>
                            <span style={{color: '#D4AF37', fontWeight: '700', fontSize: 'clamp(1rem, 2.5vw, 1.25rem)'}}>
                              {count}
                            </span>
                          </div>
                        ))}
                      </div>
                    </div>

                    <div style={{background: 'rgba(34, 197, 94, 0.05)', borderRadius: '0.75rem', padding: 'clamp(1.5rem, 3vw, 2rem)', border: '1px solid rgba(34, 197, 94, 0.2)', boxShadow: '0 10px 40px rgba(0, 0, 0, 0.3)'}}>
                      <h3 className="oscar-title" style={{fontSize: 'clamp(1.25rem, 3vw, 1.5rem)', fontWeight: '700', marginBottom: '1.25rem', textAlign: 'center', color: '#22c55e', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem'}}>
                        <i className="fas fa-user"></i>
                        ×©×—×§× ×™×
                      </h3>
                      <div style={{display: 'flex', flexDirection: 'column', gap: 'clamp(0.75rem, 2vw, 1rem)'}}>
                        {Object.entries(actorNominations).sort((a, b) => b[1] - a[1]).map(([name, count]) => (
                          <div key={name} style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: 'clamp(0.75rem, 2vw, 1rem)', background: 'linear-gradient(135deg, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.2) 100%)', borderRadius: '0.5rem', border: '1px solid rgba(34, 197, 94, 0.2)'}}>
                            <span style={{color: '#ffffff', fontWeight: '500', fontSize: 'clamp(0.9rem, 2vw, 1rem)'}}>{name}</span>
                            <span style={{color: '#22c55e', fontWeight: '700', fontSize: 'clamp(1rem, 2.5vw, 1.25rem)'}}>
                              {count}
                            </span>
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              );
            })()}

            {!isAuthenticated ? (
              <div style={{marginBottom: 'clamp(2rem, 4vw, 3rem)', display: 'flex', justifyContent: 'center'}}>
                <div style={{background: 'linear-gradient(180deg, rgba(212, 175, 55, 0.1) 0%, rgba(0, 0, 0, 0.3) 100%)', borderRadius: '0.75rem', padding: 'clamp(1.5rem, 3vw, 2rem)', boxShadow: '0 10px 40px rgba(0, 0, 0, 0.5)', border: '2px solid rgba(212, 175, 55, 0.3)', maxWidth: '32rem', width: '100%'}}>
                  <div style={{textAlign: 'center', marginBottom: '1.5rem'}}>
                    <i className="fas fa-vote-yea" style={{fontSize: 'clamp(2rem, 5vw, 3rem)', color: '#D4AF37', marginBottom: '1rem', display: 'block'}}></i>
                    <h3 className="oscar-title" style={{fontSize: 'clamp(1.25rem, 3vw, 1.75rem)', fontWeight: '700', color: '#D4AF37', marginBottom: '0.5rem'}}>
                      ×”×ª×—×œ ×œ×”×¦×‘×™×¢
                    </h3>
                    <p style={{color: '#aaa', fontSize: 'clamp(0.875rem, 2vw, 1rem)'}}>
                      ×”×–×Ÿ ××ª ×”×¤×¨×˜×™× ×©×œ×š ×›×“×™ ×œ×”×ª×—×™×œ ×œ×”×¦×‘×™×¢
                    </p>
                  </div>

                  {message && (
                    <div style={{
                      padding: '0.875rem',
                      borderRadius: '0.5rem',
                      marginBottom: '1rem',
                      textAlign: 'center',
                      fontWeight: '600',
                      fontSize: 'clamp(0.875rem, 2vw, 1rem)',
                      background: message.type === 'success' ? 'rgba(34, 197, 94, 0.15)' : 'rgba(239, 68, 68, 0.15)',
                      color: message.type === 'success' ? '#22c55e' : '#ef4444',
                      border: '1px solid ' + (message.type === 'success' ? 'rgba(34, 197, 94, 0.3)' : 'rgba(239, 68, 68, 0.3)')
                    }}>
                      {message.text}
                    </div>
                  )}

                  <div style={{display: 'grid', gap: '1rem'}}>
                    <input
                      type="email"
                      placeholder="×”××™×™×œ ×©×œ×š"
                      value={email}
                      onChange={(e) => setEmail(e.target.value)}
                      style={{
                        width: '100%',
                        padding: 'clamp(0.875rem, 2vw, 1rem)',
                        borderRadius: '0.5rem',
                        background: 'rgba(0, 0, 0, 0.5)',
                        border: '1px solid rgba(212, 175, 55, 0.3)',
                        color: 'white',
                        fontSize: 'clamp(0.875rem, 2vw, 1rem)',
                        outline: 'none'
                      }}
                    />
                    <input
                      type="tel"
                      placeholder="××¡×¤×¨ ×”×˜×œ×¤×•×Ÿ ×©×œ×š"
                      value={phone}
                      onChange={(e) => setPhone(e.target.value)}
                      style={{
                        width: '100%',
                        padding: 'clamp(0.875rem, 2vw, 1rem)',
                        borderRadius: '0.5rem',
                        background: 'rgba(0, 0, 0, 0.5)',
                        border: '1px solid rgba(212, 175, 55, 0.3)',
                        color: 'white',
                        fontSize: 'clamp(0.875rem, 2vw, 1rem)',
                        outline: 'none'
                      }}
                    />
                    <button
                      onClick={handleAuthentication}
                      disabled={voting}
                      style={{
                        width: '100%',
                        padding: 'clamp(1rem, 2.5vw, 1.25rem)',
                        background: voting
                          ? 'rgba(212, 175, 55, 0.3)'
                          : 'linear-gradient(135deg, #D4AF37 0%, #C5A028 100%)',
                        color: '#000000',
                        fontWeight: '700',
                        fontSize: 'clamp(1rem, 2.5vw, 1.25rem)',
                        borderRadius: '0.5rem',
                        border: 'none',
                        cursor: voting ? 'not-allowed' : 'pointer',
                        boxShadow: voting ? 'none' : '0 6px 20px rgba(212, 175, 55, 0.4)',
                        transition: 'all 0.2s',
                        letterSpacing: '0.02em'
                      }}
                    >
                      {voting ? '×‘×•×“×§...' : '×”××©×š ×œ×”×¦×‘×¢×”'}
                    </button>
                  </div>
                </div>
              </div>
            ) : (
              <div style={{marginBottom: 'clamp(2rem, 4vw, 3rem)', textAlign: 'center'}}>
                <div style={{background: 'rgba(34, 197, 94, 0.15)', border: '2px solid rgba(34, 197, 94, 0.3)', borderRadius: '0.75rem', padding: 'clamp(1rem, 2vw, 1.5rem)', display: 'inline-block'}}>
                  <i className="fas fa-check-circle" style={{color: '#22c55e', fontSize: 'clamp(1.5rem, 3vw, 2rem)', marginLeft: '0.75rem'}}></i>
                  <span style={{color: '#22c55e', fontWeight: '700', fontSize: 'clamp(1rem, 2vw, 1.25rem)'}}>
                    ×××•××ª! ×‘×—×¨ ×§×˜×’×•×¨×™×” ×œ×”×¦×‘×¢×”
                  </span>
                </div>
              </div>
            )}

            <div style={{marginBottom: 'clamp(2rem, 4vw, 3rem)', display: 'flex', justifyContent: 'center'}}>
              <div style={{background: 'rgba(255, 255, 255, 0.03)', borderRadius: '0.5rem', padding: 'clamp(1rem, 3vw, 1.5rem)', boxShadow: '0 4px 20px rgba(0, 0, 0, 0.3)', border: '1px solid rgba(255, 255, 255, 0.1)', maxWidth: '28rem', width: '100%'}}>
                <div style={{display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '1rem'}}>
                  <i className="fas fa-user-shield" style={{color: '#D4AF37'}}></i>
                  <span style={{fontWeight: '600', color: '#e5e5e5', fontSize: 'clamp(0.875rem, 2vw, 1rem)'}}>×™×© ×œ×š ×§×•×“ ×× ×”×œ?</span>
                </div>
                <div style={{display: 'flex', gap: '0.5rem', flexDirection: window.innerWidth < 400 ? 'column' : 'row'}}>
                  <input
                    type="password"
                    placeholder="×”×–×Ÿ ×§×•×“"
                    value={adminCode}
                    onChange={(e) => setAdminCode(e.target.value)}
                    onKeyPress={(e) => e.key === 'Enter' && checkAdminCode()}
                    style={{flex: 1, padding: '0.75rem', borderRadius: '0.375rem', background: 'rgba(0, 0, 0, 0.5)', border: '1px solid rgba(255, 255, 255, 0.1)', color: 'white', fontSize: 'clamp(0.875rem, 2vw, 1rem)', outline: 'none'}}
                  />
                  <button
                    onClick={checkAdminCode}
                    style={{padding: '0.75rem 1.5rem', background: 'linear-gradient(135deg, #D4AF37 0%, #C5A028 100%)', color: '#000', fontWeight: '700', borderRadius: '0.375rem', border: 'none', cursor: 'pointer', fontSize: 'clamp(0.875rem, 2vw, 1rem)', whiteSpace: 'nowrap'}}
                  >
                    ×‘×“×•×§
                  </button>
                </div>
                {showAdmin && (
                  <>
                    <div style={{marginTop: '1rem', padding: '0.75rem', background: 'rgba(34, 197, 94, 0.15)', border: '1px solid rgba(34, 197, 94, 0.3)', borderRadius: '0.375rem', textAlign: 'center', color: '#22c55e', fontWeight: '600', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem', fontSize: 'clamp(0.8rem, 2vw, 0.9rem)'}}>
                      <i className="fas fa-check-circle"></i>
                      ××¦×‘ ×× ×”×œ ×¤×¢×™×œ
                    </div>
                    <div style={{marginTop: '1rem', padding: '1rem', background: 'rgba(212, 175, 55, 0.1)', border: '1px solid rgba(212, 175, 55, 0.3)', borderRadius: '0.5rem', textAlign: 'center'}}>
                      <div style={{fontSize: 'clamp(0.875rem, 2vw, 1rem)', color: '#aaa', marginBottom: '0.5rem'}}>
                        ×¡×š ×”××¦×‘×™×¢×™× ×¢×“ ×›×”
                      </div>
                      <div style={{fontSize: 'clamp(2rem, 5vw, 3rem)', color: '#D4AF37', fontWeight: '800', fontFamily: 'Playfair Display, serif'}}>
                        {totalVoters}
                      </div>
                    </div>
                  </>
                )}
              </div>
            </div>

            <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(min(280px, 100%), 1fr))', gap: 'clamp(1rem, 3vw, 1.5rem)'}}>
              {categories.map((category, index) => {
                const icons = ['fa-award', 'fa-medal', 'fa-star', 'fa-music', 'fa-trophy', 'fa-film', 'fa-camera', 'fa-pen'];
                const icon = icons[index] || 'fa-trophy';

                const hasVoted = votedCategories.includes(category.id);

                return (
                  <button
                    key={category.id}
                    onClick={() => isAuthenticated && !hasVoted && setSelectedCategory(category)}
                    disabled={!isAuthenticated || hasVoted}
                    style={{
                      background: hasVoted
                        ? 'linear-gradient(180deg, rgba(34, 197, 94, 0.15) 0%, rgba(34, 197, 94, 0.05) 100%)'
                        : isAuthenticated
                        ? 'linear-gradient(180deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%)'
                        : 'linear-gradient(180deg, rgba(255, 255, 255, 0.02) 0%, rgba(255, 255, 255, 0.01) 100%)',
                      borderRadius: '0.5rem',
                      padding: 'clamp(1.25rem, 3vw, 2rem)',
                      boxShadow: '0 4px 20px rgba(0, 0, 0, 0.3)',
                      border: hasVoted ? '2px solid rgba(34, 197, 94, 0.5)' : '1px solid rgba(212, 175, 55, 0.2)',
                      cursor: isAuthenticated && !hasVoted ? 'pointer' : 'not-allowed',
                      transition: 'all 0.3s',
                      textAlign: 'center',
                      opacity: isAuthenticated ? 1 : 0.5,
                      position: 'relative'
                    }}
                    onMouseEnter={(e) => {
                      if (isAuthenticated && !hasVoted) {
                        e.currentTarget.style.transform = 'translateY(-5px)';
                        e.currentTarget.style.borderColor = '#D4AF37';
                        e.currentTarget.style.boxShadow = '0 8px 30px rgba(212, 175, 55, 0.3)';
                      }
                    }}
                    onMouseLeave={(e) => {
                      if (isAuthenticated && !hasVoted) {
                        e.currentTarget.style.transform = 'translateY(0)';
                        e.currentTarget.style.borderColor = 'rgba(212, 175, 55, 0.2)';
                        e.currentTarget.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.3)';
                      }
                    }}
                  >
                    {hasVoted && (
                      <div style={{
                        position: 'absolute',
                        top: '0.5rem',
                        right: '0.5rem',
                        width: 'clamp(2rem, 5vw, 2.5rem)',
                        height: 'clamp(2rem, 5vw, 2.5rem)',
                        background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',
                        borderRadius: '50%',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        boxShadow: '0 4px 15px rgba(34, 197, 94, 0.5)'
                      }}>
                        <i className="fas fa-check" style={{fontSize: 'clamp(1rem, 2.5vw, 1.25rem)', color: '#fff'}}></i>
                      </div>
                    )}
                    <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 'clamp(0.75rem, 2vw, 1rem)'}}>
                      <div style={{
                        width: 'clamp(3.5rem, 12vw, 5rem)',
                        height: 'clamp(3.5rem, 12vw, 5rem)',
                        background: hasVoted
                          ? 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)'
                          : 'linear-gradient(135deg, #D4AF37 0%, #C5A028 100%)',
                        borderRadius: '50%',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        boxShadow: hasVoted ? '0 6px 20px rgba(34, 197, 94, 0.4)' : '0 6px 20px rgba(212, 175, 55, 0.4)'
                      }}>
                        <i className={`fas ${icon}`} style={{fontSize: 'clamp(1.75rem, 6vw, 2.5rem)', color: hasVoted ? '#fff' : '#000'}}></i>
                      </div>
                      <h3 className="oscar-title" style={{fontSize: 'clamp(1.125rem, 3vw, 1.5rem)', fontWeight: '700', textAlign: 'center', color: '#ffffff', margin: 0, lineHeight: 1.3}}>
                        {category.name}
                      </h3>
                      <div style={{width: '60%', height: '1px', background: 'linear-gradient(90deg, transparent 0%, #D4AF37 50%, transparent 100%)'}} />
                      <span style={{color: '#D4AF37', fontWeight: '600', fontSize: 'clamp(0.875rem, 2vw, 1rem)', letterSpacing: '0.05em'}}>
                        ×œ×—×¥ ×œ×”×¦×‘×¢×”
                      </span>
                    </div>
                  </button>
                );
              })}
            </div>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<AcademyAwards />);
  </script>
</body>
</html>
